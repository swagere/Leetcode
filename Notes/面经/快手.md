## 一面 4.11 15:00

#### 算法

字符串反转

#### 八股

1. hashmap和concurrentHashMap有什么区别

2. 为什么concurrentHashMap要实现sychronized+cas锁呢

   从sychronized的优化和cas无锁化的角度回答

3. 线程池参数

4. 线程池类型的选择

#### 项目

1. 参与的最新的编码的部分是什么

2. 监控的方式是什么

   分层，埋点

3. 春节红包的形式是什么 类似红包雨？发放的奖品有哪些类型？

4. 介绍一下春节红包的技改方案

5. 限流是怎么实现，是接口级别的限流吗

   rpc框架和本地都实现了限流

6. 接口的流量大概是多少，峰值的流量呢

   日常的qps在3000-5000，峰值的qps为3w

7. 限流是争对主调方还是被调方实现的

8. 降级的方案都有哪些呢？ 什么时候会触发限流？

   对下游接口限流；mq消费降级

9. 实际情况下降级开关是需要人工打开的还是做了自适应处理呢

10. 慢sql优化

11. 覆盖索引

12. 数据库扩容怎么实现

13. 春节红包项目里面具体负责哪两个组件

14. 如果系统的qps在3w，此时突然需要扛住两三个量级的qps，你有什么系统改造的思路

15. 你觉得改造的瓶颈点可能在哪儿

    不同的系统不一样

16. redis怎么去实现分布式锁

17. 用分布式锁出现过哪些问题 是怎么处理的

    死锁，设置过期时间在一定程度上缓解死锁

18. 过期时间一般是怎么考虑设置的

19. jmq和其他开源的mq有什么区别或者优势呢





## 二面 4.14 15:00

#### 八股

1. redis和mysql使用场景

2. redis和mysql都有缓存机制，100T的数据库里只有10M数据，你觉得用redis还是mysql存储效率更高

   redis 因为不是随机读取，mysql的缓存持久化到数据库也是随机读取，效率较低

3. buffer pool什么时候会读入数据

4. mysql内存淘汰策略

5. redis内存淘汰策略

6. 就刚才的场景而言你选择的内存淘汰策略是什么

   设置过期时间的键的LRU算法

7. redis里面有什么比较熟悉的

   持久化机制

#### 项目

1. 你负责的组件的主要功能，逻辑复杂吗

2. 举一个业务的具体执行流程

   权益发放流程：读取配置-风控检测-选取奖励-奖励发放

3. 只有一个奖品的时候也需要风控判断吗

4. 组件间的调用使用什么方式

   RPC

5. 查询活动配置是调用中台的接口吗

   数据库查询，会先做一层缓存

6. 缓存会设置有效期吗？设置有效期的原则

   一天？

7. 你理解有效期为什么是一天 不是一周或者一个小时

   业务配置的有效期一般是以天为单位？

8. 如果现在有场景 当运营更改有效期的时候 如何灵活的有效期的做数据一致性

   在更改数据库的同时更改缓存，有效期时间设置为固定过期时间

9. 为什么设置固定过期时间而不设置当前与过期时间的差值

   不方便配置灵活更改

10. 设计一个具体方法的实现，运营修改活动有效期的时候会有哪些步骤

    分布式锁-修改数据库-修改缓存（注意异常情况是否需要回滚

11. 此时分布式锁怎么设计

    以uuid或者一个唯一id作为标识，去对这一次请求上锁

12. 如果有两个人同时操作，你觉得应该都操作成功吗

    数据库可以设置乐观锁，当成功获取锁的人才能正确修改数据，另一个人应该修改不成功并响应给前端

